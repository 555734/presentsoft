<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お問い合わせ - PRESENTSOFT</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <p><a href="index.html">← PRESENTSOFT トップへ戻る</a></p>

    <h1>お問い合わせ</h1>
    <p>以下のフォームに入力し、送信ボタンを押してください。お使いのメールアプリが起動します。</p>

    <div class="app-card">
        <form id="contact-form">
            <div style="margin-bottom: 15px;">
                <label for="name" style="display: block; font-weight: bold;">お名前</label>
                <input type="text" id="name" name="name" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label for="email" style="display: block; font-weight: bold;">返信先メールアドレス</label>
                <input type="email" id="email" name="email" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label for="app-select" style="display: block; font-weight: bold;">対象アプリ</label>
                <select id="app-select" name="app" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="general">その他・一般</option>
                    <option value="cocotore">ここ撮れわんわん</option>
                    <option value="sample">サンプルアプリ</option>
                </select>
            </div>

            <div style="margin-bottom: 15px;">
                <label for="message" style="display: block; font-weight: bold;">お問い合わせ内容</label>
                <textarea id="message" name="message" rows="5" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea>
            </div>

            <button type="submit" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 1em;">送信する</button>
        </form>
    </div>

    <footer>&copy; 2026 PRESENTSOFT</footer>

    <script>
        (function () {
            /**
             * お問い合わせフォームの初期化を行います。
             */
            function initContactForm() {
                console.log("[Debug] initContactForm: フォームの初期化を開始します。");
                const form = document.getElementById('contact-form');
                
                if (form) {
                    form.addEventListener('submit', handleFormSubmit);
                    console.log("[Debug] initContactForm: 送信イベントリスナーを登録しました。");
                } else {
                    console.log("[Debug] initContactForm: エラー - フォームが見つかりませんでした。");
                }
            }

            /**
             * フォーム送信イベントを処理し、mailtoリンクを生成して実行します。
             */
            function handleFormSubmit(event) {
                console.log("[Debug] handleFormSubmit: 送信ボタンがクリックされました。");
                event.preventDefault(); // 通常の送信動作をキャンセル

                // 入力データの取得
                const formData = {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    app: document.getElementById('app-select').value,
                    message: document.getElementById('message').value
                };
                console.log("[Debug] handleFormSubmit: 入力データを抽出しました:", formData);

                // メールの設定
                const targetEmail = "a3506124@gmail.com";
                const subject = encodeURIComponent("【PRESENTSOFT お問い合わせ】" + formData.app);
                const body = encodeURIComponent(
                    "お名前: " + formData.name + "\n" +
                    "返信先メール: " + formData.email + "\n" +
                    "対象アプリ: " + formData.app + "\n\n" +
                    "【お問い合わせ内容】\n" + formData.message
                );

                console.log("[Debug] handleFormSubmit: 送信先アドレス: " + targetEmail);
                console.log("[Debug] handleFormSubmit: メールの件名と本文をエンコードしました。");

                // mailtoリンクの構築と実行
                const mailtoUrl = "mailto:" + targetEmail + "?subject=" + subject + "&body=" + body;
                console.log("[Debug] handleFormSubmit: 生成されたURL: " + mailtoUrl);
                
                window.location.href = mailtoUrl;
                console.log("[Debug] handleFormSubmit: window.location.href を更新し、メーラーを呼び出しました。");
            }

            // フォームの初期化を実行
            initContactForm();
        })();
    </script>
</body>

</html>
